<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            padding: 20px; 
            background: var(--tg-theme-bg-color); 
            color: var(--tg-theme-text-color);
            margin: 0;
        }
        .task { 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 12px; 
            background: var(--tg-theme-secondary-bg-color);
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .task:hover { 
            background: var(--tg-theme-button-color); 
            color: var(--tg-theme-button-text-color);
        }
        #newTask { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            background: var(--tg-theme-button-color); 
            color: var(--tg-theme-button-text-color);
            border: none; 
            font-size: 24px;
        }
        h1 { margin-top: 0; }
    </style>
</head>
<body>
    <h1>üìã –ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
    <div id="tasks"></div>
    <button id="newTask">‚ûï</button>

    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        
        let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }
        
        function renderTasks() {
            document.getElementById('tasks').innerHTML = tasks.map((task, index) => 
                `<div class="task" onclick="toggleTask(${index})">
                    ${task.done ? '‚úÖ' : 'üî¥'} ${task.text}
                </div>`
            ).join('');
        }
        
        function addTask() {
            const text = prompt('–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞:');
            if (text) {
                tasks.push({text: text, done: false});
                saveTasks();
                renderTasks();
                Telegram.WebApp.HapticFeedback.impactOccurred('light');
            }
        }
        
        function toggleTask(index) {
            tasks[index].done = !tasks[index].done;
            saveTasks();
            renderTasks();
            Telegram.WebApp.HapticFeedback.impactOccurred('medium');
        }
        
        document.getElementById('newTask').onclick = addTask;
        Telegram.WebApp.MainButton.setText('üîÑ –û–±–Ω–æ–≤–∏—Ç—å').show().onClick(renderTasks);
        
        renderTasks();
    </script>
</body>
</html>
